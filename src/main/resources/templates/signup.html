<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <script>
        function validatePassword() {
            const pw = document.getElementById("pw").value;
            const pwCheck = document.getElementById("pwCheck").value;
            const alertBox = document.getElementById("pwMismatchAlert");

            if (pw !== pwCheck) {
                alertBox.classList.remove("d-none");
                return false;
            } else {
                alertBox.classList.add("d-none");
                return true;
            }
        }
    </script>
</head>

<body>
    <main class="form-signin w-100 m-auto">
        <div class="d-flex justify-content-center align-items-center vh-100">
            <div class="card p-4" style="width: 100%; max-width: 360px;">
                <form th:action="@{/signup}" method="post" onsubmit="return validatePassword()">
                    <h1 class="h3 mb-3 fw-normal">회원가입</h1>

                    <div class="form-floating mb-2">
                        <input type="text" class="form-control" id="uid" name="uid" placeholder="ID" required>
                        <label for="uid">ID</label>
                    </div>

                    <div class="form-floating mb-2">
                        <input type="password" class="form-control" id="pw" name="upw" placeholder="Password" required>
                        <label for="pw">Password</label>
                    </div>

                    <div class="form-floating mb-2">
                        <input type="password" class="form-control" id="pwCheck" placeholder="Password 확인" required>
                        <label for="pwCheck">Password 확인</label>
                    </div>

                    <div id="pwMismatchAlert" class="alert alert-danger d-none p-2 py-1 mb-2" role="alert">
                        비밀번호가 일치하지 않습니다.
                    </div>

                    <div th:if="${errorMessage != null}" class="alert alert-danger p-2 py-1 mb-2" role="alert" th:text="${errorMessage}"></div>

                    <button class="btn btn-primary w-100 py-2" type="submit">가입하기</button>
                </form>
            </div>
        </div>
    </main>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>

</html>